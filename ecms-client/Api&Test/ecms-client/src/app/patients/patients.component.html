<h2>Patients</h2>
<br/>
<div *ngIf="error" class="alert alert-danger">{{ error }}</div>
<table *ngIf="patientsObservable | async as patients; else loading" class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Native Name</th>
            <th>User Name</th>
            <th>Email</th>
            <th>Gender</th>
            <th>Birthday</th>
            <th>Weight</th>
            <th>Location</th>
            <th>Medical Form</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let patient of patients">
            <td>{{ patient.nativeName }}</td>
            <td>{{ patient.userName }}</td>
            <td>{{ patient.email }}</td>
            <td *ngIf="patient.gender === Gender.Male; else female" class="text-center"><fa-icon [icon]="['fas', 'mars']"></fa-icon></td>
            <ng-template #female>
                <td class="text-center"><fa-icon [icon]="['fas', 'venus']"></fa-icon></td>
            </ng-template>
            <td>{{ patient.birthday.toISOString().split('T')[0] }}</td>
            <td>{{ patient.weight }} kg</td>
            <td>{{ patient.country }}, {{ patient.city }}</td>
            <td *ngIf="patient.hasMedicalData; else noForm" class="text-center"><fa-icon [icon]="['fas', 'check']"></fa-icon></td>
            <ng-template #noForm>
                <td></td>
            </ng-template>
            <td><a routerLink="/patients/edit/{{ patient.id }}"><fa-icon [icon]="['fas', 'user-cog']" style="color:blue"></fa-icon></a><a (click)="deletePatient(patient.id)"><fa-icon [icon]="['fas', 'user-times']" style="color:red; float:right"></fa-icon></a></td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td><a routerLink="/patients/edit/new"><fa-icon [icon]="['fas', 'user-plus']" style="color:green"></fa-icon></a></td>
        </tr>
    </tfoot>
</table>
<ng-template #loading>
    <div class="d-flex justify-content-center">
        <div class="spinner-border text-primary" style="width: 5rem; height: 5rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</ng-template>